diff -urN zmailer.orig/contrib/zmailcheck zmailer/contrib/zmailcheck
--- zmailer.orig/contrib/zmailcheck	Fri Jul  2 18:30:14 1999
+++ zmailer/contrib/zmailcheck	Fri Jul  2 18:31:00 1999
@@ -4,7 +4,7 @@
 
 set -e
 
-. /etc/zmailer/zmailer.conf
+. /etc/mail/zmailer.conf
 
 status()
 {
diff -urN zmailer.orig/proto/Makefile.in zmailer/proto/Makefile.in
--- zmailer.orig/proto/Makefile.in	Fri Jul  2 18:30:31 1999
+++ zmailer/proto/Makefile.in	Fri Jul  2 18:31:00 1999
@@ -216,7 +216,7 @@
 	-@( . $(PZCONFIG) ; \
 	MAILVAR=$(prefix)$$MAILVAR ; \
 	echo "Don't forget to set up MAILVAR/db by hand -- if there is nothing, we seed it now" ; \
-	$(INSTALL) -m 644 $(srcdir)/db/aliases $$MAILVAR/db/proto/aliases ; \
+	$(INSTALL) -m 644 db/aliases $$MAILVAR/db/proto/aliases ; \
 	$(INSTALL) -m 644 $(srcdir)/db/fqdnaliases $$MAILVAR/db/proto/fqdnaliases ; \
 	$(INSTALL) -m 644 $(srcdir)/db/routes $$MAILVAR/db/proto/routes ; \
 	$(INSTALL) -m 644 $(srcdir)/db/localnames $$MAILVAR/db/proto/localnames ; \
diff -urN zmailer.orig/proto/cf/SMTP+UUCP.cf.in zmailer/proto/cf/SMTP+UUCP.cf.in
--- zmailer.orig/proto/cf/SMTP+UUCP.cf.in	Fri Jul  2 18:30:30 1999
+++ zmailer/proto/cf/SMTP+UUCP.cf.in	Fri Jul  2 18:31:00 1999
@@ -7,7 +7,7 @@
 
 . $ZCONFIG
 
-PATH=.:$MAILSHARE/cf:$MAILBIN/bin ; export PATH
+PATH=.:$MAILSHARE/cf:$MAILBIN/bin:/bin:/sbin:/usr/bin:/usr/sbin ; export PATH
 PS1=z$PS1
 #
 # Configure error logging (squirrel)
@@ -61,44 +61,14 @@
 done
 
 mailconf () {
-	local hname
-
-	# My official hostname
-	if [ -f /bin/hostname ]; then
-		rawhostname=$(/bin/hostname)
-	elif [ -f /etc/sys_id ]; then
-		read rawhostname < /etc/sys_id
-	else
-		rawhostname=$(/bin/uname -n)
-	fi
-
-	hname=$(canon $rawhostname)
-
-	# Try to discover the organizational domain name
-	orgdomain=$hname
-	tsift $hname in
-	$rawhostname\.(.+)
-		orgdomain=\1
-		;;
-	tfist
-	hostname=$hname
-
-	# This is what it will say on out mail
-	mydomain=$hostname
+       orgdomain=$(/bin/hostname --domain)
+       hostname=$(/bin/hostname --fqdn)
+       read mydomain </etc/mail/mailname
 }
 
 orgdomains=x
-: ${MAILCONF:=/etc/mail.conf}
-if [ ! -r $MAILCONF ]; then
-	echo "$0: missing $MAILCONF: using the following values:"
-	mailconf
-	echo orgdomain=$orgdomain
-	echo hostname=$hostname
-	echo mydomain=$mydomain
-	provide siteinfo
-else
-	. $MAILCONF && provide siteinfo
-fi
+mailconf
+provide siteinfo
 [ "$orgdomains" = x ] && orgdomains=$orgdomain
 
 # set hostname to enable message-id generation and checking
diff -urN zmailer.orig/proto/sm.conf.in zmailer/proto/sm.conf.in
--- zmailer.orig/proto/sm.conf.in	Fri Jul  2 18:30:32 1999
+++ zmailer/proto/sm.conf.in	Fri Jul  2 18:31:00 1999
@@ -9,17 +9,17 @@
 #
 # bitnet stuff F=hu not set?
 #
-bsmtp3		snmSX	/usr/local/funetnje/bmail	bmail -b $h $g $u
-bsmtp3rfc	snmSX	/usr/local/funetnje/bmail	bmail -b $h $g $u
-bsmtp3nd	snmSX	/usr/local/funetnje/bmail	bmail -nd $h $g $u
-bsmtp3ndrfc	snmSX	/usr/local/funetnje/bmail	bmail -nd $h $g $u
-defrt1 		snS	/usr/local/funetnje/bmail	bmail $g $u
-bitnet2		snS	/usr/local/funetnje/bmail	bmail $g $u
+#bsmtp3		snmSX	/usr/local/funetnje/bmail	bmail -b $h $g $u
+#bsmtp3rfc	snmSX	/usr/local/funetnje/bmail	bmail -b $h $g $u
+#bsmtp3nd	snmSX	/usr/local/funetnje/bmail	bmail -nd $h $g $u
+#bsmtp3ndrfc	snmSX	/usr/local/funetnje/bmail	bmail -nd $h $g $u
+#defrt1		snS	/usr/local/funetnje/bmail	bmail $g $u
+#bitnet2	snS	/usr/local/funetnje/bmail	bmail $g $u
 #
 # the following entries are included to illustrate other possibilities
 #
 #local	mS	/usr/lib/mail/localm		localm -r $g $u
-cyrus	Pn	/usr/cyrus/bin/deliver		deliver -e -m $h -- $u
+#cyrus	Pn	/usr/cyrus/bin/deliver		deliver -e -m $h -- $u
 #		# CYRUS example from: Tom Samplonius <tom@sdf.com>
 procm	sSPfn	@PROCMAIL@	procmail -a $h -d $u
 #		# Procmail example from: Ken Pizzini <ken@spry.com>
diff -urN zmailer.orig/proto/smtpserver.conf.in zmailer/proto/smtpserver.conf.in
--- zmailer.orig/proto/smtpserver.conf.in	Fri Jul  2 18:30:32 1999
+++ zmailer/proto/smtpserver.conf.in	Fri Jul  2 18:31:00 1999
@@ -53,14 +53,16 @@
 #  %T -- curtime string
 #  %X -- xlatelang parameter
 #
-#PARAM hdr220 %H ZMailer ESMTP-server %V running at Yoyodyne Propulsion Inc
+PARAM hdr220 %H ZMailer ESMTP-server %V from Polish Linux Distribution
 #PARAM hdr220 %H (NO UCE)(NO UBE) our local time is now %T
 #
 PARAM help -------------------------------------------------------------
-PARAM help  This mail-server is at Yoyodyne Propulsion Inc.
-PARAM help  Our telephone number is: +1-234-567-8900, and
-PARAM help  telefax number is: +1-234-567-8999
-PARAM help  Our business-hours are Mon-Fri: 0800-1700 (Timezone: -0700)
+PARAM help  Polish Linux Distribution
+PARAM help  
+PARAM help  http://www.pld.org.pl/
+PARAM help  ftp://ftp.pld.org.pl/
+PARAM help  pld-list@pld.org.pl (managed by ezmlm)
+PARAM help
 PARAM help
 PARAM help  Questions regarding our email service should be sent via
 PARAM help  email to address  <postmaster@OURDOMAIN>
@@ -111,7 +113,7 @@
 #               [max loadavg]
 #
 localhost	    999	ftveR
-some.host.domain    999	!NO EMAIL ACCEPTED FROM YOUR MACHINE
+.spam.net	    999	!NO EMAIL ACCEPTED FROM YOUR MACHINE
 # If the host presents itself as:  HELO [1.2.3.4], be lenient to it..
 # The syntax below is due to these patterns being SH-GLOB style patterns
 # where the brackets are special characters.
diff -urN zmailer.orig/utils/zmailer.init.sh.in zmailer/utils/zmailer.init.sh.in
--- zmailer.orig/utils/zmailer.init.sh.in	Fri Jul  2 18:30:40 1999
+++ zmailer/utils/zmailer.init.sh.in	Fri Jul  2 18:36:50 1999
@@ -1,7 +1,27 @@
-#! /bin/sh
+#!/bin/sh
+#
+# zmailer       This shell script takes care of starting and stopping
+#               zmailer.
+#
+# chkconfig: 2345 80 30
+# description: zmailer is a Mail Transport Agent, which is the program \
+# that moves mail from one machine to another.
+
+export PATH=/bin:/sbin:/usr/bin:/usr/sbin
+
+# Source function library.
+. /etc/rc.d/init.d/functions
+
+# Source networking configuration.
+. /etc/sysconfig/network
+
+# Check that networking is up.
+[ "${NETWORKING}" == "no" ] && exit 0
 
 ZCONFIG=@ZMAILERCFGFILE@
 
+[ -f $ZCONFIG ] || exit 0
+
 if [ -r $ZCONFIG ]; then
 	. $ZCONFIG
 else
@@ -11,23 +31,49 @@
 case "$1" in
 start)
 	if [ "${SMTPSERVER}" ]; then
-		$MAILBIN/zmailer smtp
+		show Starting ZMailer smtp daemon; busy
+		if $$MAILBIN/zmailer smtp > /dev/null 2>&1 ; then
+			deltext; ok
+		else
+			deltext; fail
+		fi
+		
 	elif [ ${MAILSERVER-NONE} = NONE -a -x $MAILBIN/zmailer ]; then
-		$MAILBIN/zmailer bootclean
-		$MAILBIN/zmailer
+		show Starting ZMailer bootcleaning; busy
+                if $MAILBIN/zmailer bootclean > /dev/null 2>&1 ; then
+                        deltext; ok
+                else
+                        deltext; fail
+                fi
+
+		show Starting Zmailer main daemon; busy
+                if $MAILBIN/zmailer > /dev/null 2>&1 ; then
+                        deltext; ok
+                else
+                        deltext; fail
+                fi
 	fi
 	touch /var/lock/subsys/zmailer
 	;;
 
 stop)
 	if [ ${MAILSERVER-NONE} = NONE -a -x $MAILBIN/zmailer ]; then
-		$MAILBIN/zmailer kill
+		show Stopping ZMailer daemons; busy
+                if $MAILBIN/zmailer kill > /dev/null 2>&1 ; then
+                        deltext; ok
+                else
+                        deltext; fail
+                fi
+
 	fi
 	rm -f /var/lock/subsys/zmailer
 	;;
-
+restart)
+	$0 stop
+	$0 start
+	;;
 *)
-	echo "Usage: zmailer.init {start|stop}"
+	echo "Usage: $0 {start|stop}"
 	exit 0
 	;;
 esac
